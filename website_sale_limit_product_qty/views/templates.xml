<odoo>
    <data>
        <template id="product" inherit_id="website_sale.product">
            <xpath expr="//a[@id='add_to_cart']" position="after">
                <a role="button" id="add_to_cart_dummy"
                   class="btn btn-primary btn-lg js_check_product disabled d-none my-1 mr-1 px-5 font-weight-bold flex-grow-1"
                   href="#">
                    <i class="fa fa-shopping-cart mr-2"/>ADD TO CART
                </a>
            </xpath>
            <xpath expr="//div[@id='product_option_block']" position="after">

                <!--
                <div id="min_qty_info" t-if="product_variant.apply_qty_limit and product_variant.min_limit > 0"
                     class="text-info mt-2">
                    <sup>*</sup>Minimum ordered quantity is
                    <t t-esc="product_variant.min_limit"/>
                </div>

                <div id="max_qty_info" t-if="product_variant.apply_qty_limit and product_variant.max_limit > 0"
                     class="d-none text-warning mt-2">
                    <sup>*</sup>Maximum ordered quantity is
                    <t t-esc="product_variant.max_limit"/>
                </div>
                -->

                <div id="qty_limit_error" class="d-none mt-2"><sup>*</sup>Can't order too much quantity!</div>

            </xpath>
        </template>

        <template id="product_quantity" inherit_id="website_sale.product_quantity">
            <xpath expr="//input[hasclass('quantity')]" position="attributes">
                <!--
                <attribute name="t-att-data-apply_qty_limit">product_variant.apply_qty_limit</attribute>
                <attribute name="t-att-data-min">product_variant.min_limit if product_variant.apply_qty_limit else add_qty or 1</attribute>
                <attribute name="t-att-data-limit_max">product_variant.max_limit if product_variant.apply_qty_limit else 0</attribute>
                <attribute name="t-att-value">product_variant.min_limit if product_variant.apply_qty_limit else add_qty or 1</attribute>
                -->
                <attribute name="t-att-data-limit_reached"></attribute>
            </xpath>
        </template>

        <template id="cart_lines" inherit_id="website_sale.cart_lines">
            <xpath expr="//input[@class='js_quantity form-control quantity']" position="before">
                <t t-set="variant_qty_limit" t-value="line.product_id.get_variant_qty_limit(line.product_uom_qty)"/>
            </xpath>

            <xpath expr="//input[@class='js_quantity form-control quantity']" position="attributes">
                <attribute name="t-att-data-apply_qty_limit">
                    variant_qty_limit.get('apply_qty_limit', False) if variant_qty_limit else False
                </attribute>
                <attribute name="t-att-data-min">
                    variant_qty_limit.get('limit_min', 1) if variant_qty_limit else 0
                </attribute>
                <attribute name="t-att-data-limit_max">
                    variant_qty_limit.get('limit_max', 0) if variant_qty_limit else 0
                </attribute>
                <attribute name="t-att-data-limit_reached">
                    variant_qty_limit.get('limit_reached', "low") if variant_qty_limit else "low"
                </attribute>
            </xpath>

            <xpath expr="//td[hasclass('td-qty')]" position="inside">
                <t t-set="qty_limit" t-value="line.product_id.get_variant_qty_limit(line.product_uom_qty)"/>
                <t t-if="qty_limit.get('apply_qty_limit', False)">
                    <div id="max_qty_info"
                         t-if="qty_limit.get('limit_reached', 'low') == 'crossed'"
                         class="text-danger mt-1">
                        <sup>*</sup>Already ordered maximum
                        <t t-esc="int(qty_limit.get('limit_max'))"/>
                        quantity!
                    </div>

                    <div id="max_qty_info"
                         t-elif="qty_limit.get('limit_reached', 'low') == 'equal'"
                         class="text-warning mt-1">
                        <sup>*</sup>Maximum ordered quantity is
                        <t t-esc="int(qty_limit.get('limit_max'))"/>
                    </div>

                    <div id="min_qty_info"
                         t-elif="qty_limit.get('limit_reached', 'low') == 'low' and int(qty_limit.get('limit_min')) == line.product_uom_qty"
                         class="text-info mt-1">
                        <sup>*</sup>Minimum ordered quantity is
                        <t t-esc="int(qty_limit.get('limit_min'))"/>
                    </div>
                </t>
            </xpath>
        </template>
    </data>
</odoo>
